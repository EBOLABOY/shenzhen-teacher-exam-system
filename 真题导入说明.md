# 深圳教师考编真题数据导入说明

## 概述

本系统支持将JSON格式的真题数据导入到题库中，方便管理和练习。目前已支持2012年5月27日小学段考试真题的导入。

## 数据格式

### JSON文件结构

真题JSON文件应包含以下结构：

```json
{
  "exam_info": {
    "year": 2012,
    "month_day": "5月27日",
    "segment": "小学段"
  },
  "sections": [
    {
      "type": "单项选择题",
      "count": 30,
      "points_per_question": 0.8,
      "note": "第一部分 教育教学基础",
      "questions": [
        {
          "number": 1,
          "text": "题目内容",
          "options": {
            "A": "选项A",
            "B": "选项B",
            "C": "选项C",
            "D": "选项D"
          },
          "correct_answer": "C",
          "explanation": "答案解析"
        }
      ]
    }
  ]
}
```

### 支持的题目类型

1. **单项选择题** (`multiple_choice`)
   - 包含A、B、C、D四个选项
   - 答案为单个字母

2. **多项选择题** (`multiple_select`)
   - 包含A、B、C、D、E五个选项
   - 答案为多个字母组合，如"ABC"

3. **是非题** (`true_false`)
   - 自动生成A（正确）、B（错误）选项
   - 答案为A或B

## 导入方法

### 方法一：Web界面导入（推荐）

1. 启动开发服务器：
   ```bash
   npm run dev
   ```

2. 访问管理页面：
   ```
   http://localhost:3000/admin
   ```

3. 点击"开始导入"按钮，系统会自动：
   - 扫描`真题JSON`文件夹
   - 读取所有JSON文件
   - 解析并转换数据格式
   - 导入到题库中

### 方法二：命令行导入

1. 使用Node.js脚本：
   ```bash
   node import_questions.js
   ```

2. 使用API导入脚本：
   ```bash
   node import_to_api.js
   ```

## 文件组织

```
教师考编/
├── 真题JSON/
│   ├── 20120512.JSON          # 2012年5月27日小学段真题
│   ├── 20130515.JSON          # 其他年份真题（示例）
│   └── ...
├── import_questions.js        # 本地导入脚本
├── import_to_api.js          # API导入脚本
└── src/app/admin/            # Web管理界面
```

## 数据转换规则

### 科目分类
- 包含"教育教学基础"的题目 → `教育教学基础`
- 包含"教育教学技能"的题目 → `教育教学技能`
- 其他题目 → `教育学`

### 难度分级
- 题目编号 1-20 → `easy`（简单）
- 题目编号 21-69 → `medium`（中等）
- 题目编号 70+ → `hard`（困难）

### 元数据保存
每道题目会保存以下元数据：
- 考试年份
- 考试日期
- 考试段别（小学段/中学段等）
- 原始题目编号
- 分值

## 导入结果验证

### 通过Web界面查看
访问 `http://localhost:3000/admin` 查看：
- 题目总数统计
- 按类型、科目、难度分布
- 题目预览

### 通过API查看
```bash
curl http://localhost:3000/api/questions
```

### 通过练习页面测试
访问 `http://localhost:3000/practice` 进行刷题测试

## 常见问题

### Q: 导入失败怎么办？
A: 检查以下几点：
1. 确保Next.js服务器正在运行
2. 检查JSON文件格式是否正确
3. 查看浏览器控制台的错误信息

### Q: 如何避免重复导入？
A: 系统会自动检测相同题目（基于题目内容和答案），跳过重复导入

### Q: 支持哪些JSON文件名格式？
A: 支持以`.json`或`.JSON`结尾的文件

### Q: 如何添加新的考试年份？
A: 将新的JSON文件放入`真题JSON`文件夹，按照相同格式组织数据即可

## 数据库集成

### 当前状态
- 使用内存模拟数据库
- 数据在服务器重启后会丢失

### 生产环境建议
1. 集成Supabase数据库
2. 修改API路由使用真实数据库
3. 添加数据持久化功能

### Supabase集成步骤
1. 创建Supabase项目
2. 执行`database/schema.sql`创建表结构
3. 配置环境变量
4. 修改API路由连接数据库

## 扩展功能

### 计划中的功能
- [ ] 批量编辑题目
- [ ] 题目导出功能
- [ ] 错题统计分析
- [ ] 用户答题记录
- [ ] 题目收藏功能

### 自定义扩展
可以通过修改以下文件来扩展功能：
- `src/app/api/import/route.ts` - 导入逻辑
- `src/app/admin/page.tsx` - 管理界面
- `src/app/api/questions/route.ts` - 题目API

## 技术支持

如有问题，请检查：
1. 服务器日志
2. 浏览器控制台
3. JSON文件格式
4. 网络连接状态

---

**注意**: 本系统目前为开发版本，建议在生产环境使用前进行充分测试。
